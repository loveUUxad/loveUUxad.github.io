<!DOCTYPE html>
<html lang="zh-Hans">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="王霄" />



<meta name="description" content="1. 简介redis是一个速度极快的非关系数据库,也就是我们所说的NoSQL数据库,采用单线程处理,它可以存储键(key)与5种不同类型的值(value)之间的映射(mapping),可以将存储在内存的键值对数据持久化到硬盘,可以使用复制特性来扩展读性能,还可以使用客户端分片来扩展性能,并且它还提供了多种语言的API。">
<meta property="og:type" content="article">
<meta property="og:title" content="redis学习">
<meta property="og:url" content="http://example.com/2020/08/06/%E6%95%B0%E6%8D%AE%E5%BA%93/redis/redis%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="WX">
<meta property="og:description" content="1. 简介redis是一个速度极快的非关系数据库,也就是我们所说的NoSQL数据库,采用单线程处理,它可以存储键(key)与5种不同类型的值(value)之间的映射(mapping),可以将存储在内存的键值对数据持久化到硬盘,可以使用复制特性来扩展读性能,还可以使用客户端分片来扩展性能,并且它还提供了多种语言的API。">
<meta property="og:locale">
<meta property="article:published_time" content="2020-08-05T16:00:00.000Z">
<meta property="article:modified_time" content="2022-01-09T14:48:39.527Z">
<meta property="article:author" content="王霄">
<meta property="article:tag" content="redis">
<meta name="twitter:card" content="summary">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="WX" type="application/atom+xml">



    <link rel="shortcut icon" href="https://wxad.oss-cn-beijing.aliyuncs.com/favicon.ico">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">



<link rel="stylesheet" href="/css/style.css">




<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>redis学习 | WX</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js", "//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






<meta name="generator" content="Hexo 6.3.0"></head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="https://wxad.oss-cn-beijing.aliyuncs.com/psb.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">王霄</a></h1>
        </hgroup>

        
        <p class="header-subtitle">夏天的风我永远记得</p>
        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="false" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <!--加滚动条-->
                    <nav class="header-menu" style="position:relative; height:400px; overflow-y:auto">
                        <ul>
                            
                                <li><a href="/">主页</a></li>
                            
                                <li><a href="/archives/">所有文章</a></li>
                            
                                <li><a href="/tags/">标签云</a></li>
                            
                                <li><a href="/about/">关于我</a></li>
                            
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa GitHub" target="_blank" rel="noopener" href="https://github.com/loveUUxad" title="GitHub"></a>
                            
                                <a class="fa Gitee" target="_blank" rel="noopener" href="https://gitee.com/loveUUxad" title="Gitee"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/activemq/" rel="tag">activemq</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitlab/" rel="tag">gitlab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java8/" rel="tag">java8</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" rel="tag">java并发编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/" rel="tag">java引用类型</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jdk%E5%AE%89%E8%A3%85/" rel="tag">jdk安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jmeter/" rel="tag">jmeter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kafka/" rel="tag">kafka</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lambda/" rel="tag">lambda</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/" rel="tag">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nacos/" rel="tag">nacos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nosql/" rel="tag">nosql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rabbitmq/" rel="tag">rabbitmq</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/" rel="tag">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rocketmq/" rel="tag">rocketmq</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sentinel/" rel="tag">sentinel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springcloud/" rel="tag">springcloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zookeeper/" rel="tag">zookeeper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BB%A4%E7%89%8C%E6%A1%B6/" rel="tag">令牌桶</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95/" rel="tag">压力测试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F/" rel="tag">排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%8D%E5%8A%A1%E9%99%8D%E7%BA%A7/" rel="tag">服务降级</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83/" rel="tag">注册中心</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%86%94%E6%96%AD/" rel="tag">熔断</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/" rel="tag">软件安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2/" rel="tag">进制转换</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83/" rel="tag">配置中心</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%99%90%E6%B5%81/" rel="tag">限流</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%99%90%E6%B5%81%E6%A1%86%E6%9E%B6/" rel="tag">限流框架</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/" rel="tag">项目部署</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" target="_blank" rel="noopener" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" target="_blank" rel="noopener" href="https://github.com/loveUUxad">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" target="_blank" rel="noopener" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">java开发工程师</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">王霄</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="https://wxad.oss-cn-beijing.aliyuncs.com/psb.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">王霄</a></h1>
            </hgroup>
            
            <p class="header-subtitle">夏天的风我永远记得</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/loveUUxad" title="GitHub"></a>
                            
                                <a class="fa Gitee" target="_blank" href="https://gitee.com/loveUUxad" title="Gitee"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap"><article id="post-数据库/redis/redis学习" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/08/06/%E6%95%B0%E6%8D%AE%E5%BA%93/redis/redis%E5%AD%A6%E4%B9%A0/" class="article-date">
      <time datetime="2020-08-05T16:00:00.000Z" itemprop="datePublished">2020-08-06</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      redis学习
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/redis/" rel="tag">redis</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="1-简介"><a href="#1-简介" class="headerlink" title="1. 简介"></a>1. 简介</h2><p>redis是一个速度极快的非关系数据库,也就是我们所说的NoSQL数据库,采用单线程处理,它可以存储键(key)与5种不同类型的值(value)之间的映射(mapping),可以将存储在内存的键值对数据持久化到硬盘,可以使用复制特性来扩展读性能,还可以使用客户端分片来扩展性能,并且它还提供了多种语言的API。</p>
<span id="more"></span>
<h2 id="2-特性"><a href="#2-特性" class="headerlink" title="2. 特性"></a>2. 特性</h2><p>一个产品的使用场景肯定是需要根据产品的特性,先列举一下redis的特点:</p>
<ul>
<li>读写性能优异</li>
<li>持久化</li>
<li>数据类型丰富</li>
<li>单线程</li>
<li>数据自动过期</li>
<li>发布订阅</li>
<li>分布式</li>
</ul>
<h2 id="3-使用场景"><a href="#3-使用场景" class="headerlink" title="3. 使用场景"></a>3. 使用场景</h2><h3 id="3-1-高性能适合当做缓存"><a href="#3-1-高性能适合当做缓存" class="headerlink" title="3.1 高性能适合当做缓存"></a><strong>3.1 高性能适合当做缓存</strong></h3><p>缓存是redis最常见的应用场景,之所有这么使用,主要是因为redis读写性能优异。而且逐渐有取代memcached,成为首选服务端缓存的组件。而且,redis内部是支持事务的,在使用时候能有效保证数据的一致性。作为缓存使用时,一般有两种方式保存数据: </p>
<ol>
<li><p>读取前,先去读redis,如果没有数据,读取数据库,将数据拉入redis</p>
</li>
<li><p>插入数据时,同时写入redis</p>
</li>
</ol>
<blockquote>
<p>方案一: 实施起来简单,但是有两个需要注意的地方</p>
</blockquote>
<ul>
<li>避免缓存击穿。(数据库没有就需要命中的数据,导致redis一直没有数据,而一直命中数据库)</li>
<li>数据的实时性相对会差一点。</li>
</ul>
<blockquote>
<p>方案二: 数据实时性强,但是开发时不便于统一处理</p>
</blockquote>
<p>当然,两种方式根据实际情况来适用。如: 方案一适用于对于数据实时性要求不是特别高的场景。方案二适用于字典表、数据量不大的数据存储。</p>
<h3 id="3-2-丰富的数据格式性能更高-应用场景丰富"><a href="#3-2-丰富的数据格式性能更高-应用场景丰富" class="headerlink" title="3.2 丰富的数据格式性能更高,应用场景丰富"></a>3.2 <strong>丰富的数据格式性能更高,应用场景丰富</strong></h3><p>redis相比其他缓存,有一个非常大的优势,就是支持多种数据类型。</p>
<table>
<thead>
<tr>
<th align="left">数据类型</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">string</td>
<td align="left">字符串,最简单的k-v存储</td>
</tr>
<tr>
<td align="left">hash</td>
<td align="left">hash格式,value为field和value</td>
</tr>
<tr>
<td align="left">list</td>
<td align="left">简单的list,顺序列表,支持首位或者末尾插入数据</td>
</tr>
<tr>
<td align="left">set</td>
<td align="left">无序,查找速度快,适合交集、并集、差集处理</td>
</tr>
<tr>
<td align="left">sorted set</td>
<td align="left">有序的set</td>
</tr>
</tbody></table>
<p>其实,通过上面的数据类型的特性,基本就能想到合适的应用场景了。</p>
<ul>
<li>string——适合最简单的k-v存储,类似于memcached的存储结构,短信验证码,配置信息等,就用这种类型来存储。</li>
<li>hash——一般key为ID或者唯一标示,value对应的就是详情了。如商品详情,个人信息详情,新闻详情等。</li>
<li>list——因为list是有序的,比较适合存储一些有序且数据相对固定的数据。如省市区表、字典表等。因为list是有序的,适合根据写入的时间来排序,如: 最新的***,消息队列等。</li>
<li>set——可以简单的理解为ID-List的模式,如微博中一个人有哪些好友,set最牛的地方在于,可以对两个set提供交集、并集、差集操作。例如: 查找两个人共同的好友等。</li>
<li>Sorted Set——是set的增强版本,增加了一个score参数,自动会根据score的值进行排序。比较适合类似于top 10等不根据插入的时间来排序的数据。</li>
</ul>
<p>如上所述,虽然redis不像关系数据库那么复杂的数据结构,但是,也能适合很多场景,比一般的缓存数据结构要多。了解每种数据结构适合的业务场景,不仅有利于提升开发效率,也能有效利用redis的性能。</p>
<h3 id="3-3-单线程可以作为分布式锁"><a href="#3-3-单线程可以作为分布式锁" class="headerlink" title="3.3 单线程可以作为分布式锁"></a>3.3 <strong>单线程可以作为分布式锁</strong></h3><p>谈到redis和Memcached 的区别,大家更多的是谈到数据结构和持久化这两个特性,其实还有一个比较大的区别就是: </p>
<ul>
<li>redis 是单线程,多路复用方式提高处理效率。</li>
<li>Memcached 是多线程的,通过CPU线程切换来提高处理效率。</li>
</ul>
<p>所以redis单线程的这个特性,其实也是很重要的应用场景,最常用的就是分布式锁。</p>
<h3 id="3-4-自动过期能有效提升开发效率"><a href="#3-4-自动过期能有效提升开发效率" class="headerlink" title="3.4 自动过期能有效提升开发效率"></a>3.4 <strong>自动过期能有效提升开发效率</strong></h3><p>redis针对数据都可以设置过期时间,这个特点也是大家应用比较多的,过期的数据清理无需使用方去关注,所以开发效率也比较高,当然,性能也比较高。最常见的就是: 短信验证码、具有时间性的商品展示等。无需像数据库还要去查时间进行对比。因为使用比较简单,就不赘述了。</p>
<h3 id="3-5-分布式和持久化有效应对海量数据和高并发"><a href="#3-5-分布式和持久化有效应对海量数据和高并发" class="headerlink" title="3.5 分布式和持久化有效应对海量数据和高并发"></a>3.5 <strong>分布式和持久化有效应对海量数据和高并发</strong></h3><p>redis初期的版本官方只是支持单机或者简单的主从,大多应用则都是自己去开发集群的中间件,但是随着应用越来越广泛,用户关于分布式的呼声越来越高,所以redis 3.0版本时候官方加入了分布式的支持,主要是两个方面: </p>
<ul>
<li>redis服务器主从热备,确保系统稳定性</li>
<li>redis分片应对海量数据和高并发</li>
</ul>
<p>而且redis虽然是一个内存缓存,数据存在内存,但是redis支持多种方式将数据持久化,写入硬盘,所以,redis数据的稳定性也是非常有保障的,结合redis的集群方案,有的系统已经将redis当做一种NoSql数据存储来适用。</p>
<h2 id="4-redis高可用方案"><a href="#4-redis高可用方案" class="headerlink" title="4. redis高可用方案"></a>4. redis高可用方案</h2><p>包含三种高可用方案: 主从复制,哨兵,集群</p>
<h3 id="4-1-主从复制"><a href="#4-1-主从复制" class="headerlink" title="4.1 主从复制"></a>4.1 主从复制</h3><p>通过持久化功能,redis保证了即使在服务器重启的情况下也不会损失（或少量损失）数据,因为持久化会把内存中数据保存到硬盘上,重启会从硬盘上加载数据。<br>但是由于数据是存储在一台服务器上的,如果这台服务器出现硬盘故障等问题,也会导致数据丢失。为了避免单点故障,通常的做法是将数据库复制多个副本以部署在不同的服务器上,这样即使有一台服务器出现故障,其他服务器依然可以继续提供服务。为此, redis 提供了复制（replication）功能,可以实现当一台数据库中的数据更新后,自动将更新的数据同步到其他数据库上。<br>在复制的概念中,数据库分为两类,一类是主数据库（master）,另一类是从数据库（slave）。主数据库可以进行读写操作,当写操作导致数据变化时会自动将数据同步给从数据库。而从数据库一般是只读的,并接受主数据库同步过来的数据。一个主数据库可以拥有多个从数据库,而一个从数据库只能拥有一个主数据库。</p>
<p><strong>原理:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">当从数据库启动时,会向主数据库发送sync命令,主数据库接收到sync后开始在后台报错快照rdb,在保存快照期间受到的命名缓存起来,当快照完成时,主数据库会将快照和缓存的命令一块发送给从。复制初始化结束。之后,主每受到1个命令就同步发送给从。 </span><br><span class="line">当出现断开重连后,2.8之后的版本会将断线期间的命令传给重数据库。</span><br><span class="line"></span><br><span class="line">主从复制是乐观复制,当客户端发送写执行给主,主执行完立即将结果返回客户端,并异步的把命令发送给从,从而不影响性能。也可以设置至少同步给多少个从主才可写。 </span><br><span class="line"></span><br><span class="line">无硬盘复制:如果硬盘效率低将会影响复制性能,2.8之后可以设置无硬盘复制</span><br></pre></td></tr></table></figure>



<p><strong>优点:</strong></p>
<blockquote>
<ul>
<li>高可靠性: 一方面,采用双机主备架构,能够在主库出现故障时自动进行主备切换,从库提升为主库提供服务,保证服务平稳运行;另一方面,开启数据持久化功能和配置合理的备份策略,能有效的解决数据误操作和数据异常丢失的问题。</li>
<li>读写分离策略: 从节点可以扩展主库节点的读能力,有效应对大并发量的读操作。</li>
</ul>
</blockquote>
<p><strong>缺点:</strong></p>
<blockquote>
<ul>
<li>故障恢复复杂,如果没有 redis HA 系统(需要开发),当主库节点出现故障时,需要手动将一个从节点晋升为主节点,同时需要通知业务方变更配置,并且需要让其他从库节点去复制新主库节点,整个过程需要人为干预,比较繁琐。</li>
<li>主库的写能力受到单机的限制,可以考虑分片。</li>
<li>主库的存储能力受到单机的限制,可以考虑 Pika。（一款类redis存储系统,主要解决的是用户使用 redis 的内存大小超过 50G、80G 等等这样的情况,会遇到启动恢复时间长,一主多从代价大,硬件成本贵,缓冲区容易写满等问题。）</li>
</ul>
</blockquote>
<h3 id="4-2-哨兵"><a href="#4-2-哨兵" class="headerlink" title="4.2 哨兵"></a>4.2 哨兵</h3><p>当主数据库遇到异常中断服务后,开发者可以通过手动的方式选择一个从数据库来升格为主数据库,以使得系统能够继续提供服务。然而整个过程相对麻烦且需要人工介入,难以实现自动化。 为此,redis 2.8中提供了哨兵工具来实现自动化的系统监控和故障恢复功能。<br><strong>哨兵的作用就是监控redis主、从数据库是否正常运行,主出现故障自动将从数据库转换为主数据库。</strong></p>
<p>顾名思义,哨兵的作用就是监控redis系统的运行状况。他的功能如下:  </p>
<blockquote>
<ul>
<li>监控主从数据库是否正常运行 </li>
<li>master出现故障时,自动将slave转化为master </li>
<li>多哨兵配置的时候,哨兵之间也会自动监控 </li>
<li>多个哨兵可以监控同一个redis</li>
</ul>
</blockquote>
<p>其中 redis Sentinel 集群是由若干 Sentinel 节点组成的分布式集群,可以实现故障发现、故障自动转移、配置中心和客户端通知。redis Sentinel 的节点数量要满足 2n+1(n&gt;&#x3D;1)的奇数个。</p>
<p><strong>优点:</strong></p>
<blockquote>
<ul>
<li>redis Sentinel 集群部署简单;</li>
<li>能够解决 redis 主从模式下的高可用切换问题;</li>
<li>很方便实现 redis 数据节点的线形扩展,轻松突破 redis 自身单线程瓶颈,可极大满足 redis 大容量或高性能的业务需求;</li>
<li>可以实现一套 Sentinel 监控一组 redis 数据节点或多组数据节点。</li>
</ul>
</blockquote>
<p><strong>缺点:</strong></p>
<blockquote>
<ul>
<li>部署相对 redis 主从模式要复杂一些,原理理解更繁琐;</li>
<li>资源浪费,redis 数据节点中 slave 节点作为备份节点不提供服务;</li>
<li>redis Sentinel 主要是针对 redis 数据节点中的主节点的高可用切换,对 redis 的数据节点做失败判定分为主观下线和客观下线两种,对于 redis 的从节点有对节点做主观下线操作,并不执行故障转移。</li>
<li>不能解决读写分离问题,实现起来相对复杂。</li>
</ul>
</blockquote>
<h3 id="4-3-集群"><a href="#4-3-集群" class="headerlink" title="4.3 集群"></a>4.3 集群</h3><p>redis Cluster 是 3.0 版后推出的 redis 分布式集群解决方案,主要解决 redis 分布式方面的需求,比如,当遇到单机内存,并发和流量等瓶颈的时候,redis Cluster 能起到很好的负载均衡的目的。redis Cluster 集群节点最小配置 6 个节点以上(3 主 3 从),其中主节点提供读写操作,从节点作为备用节点,不提供请求,只作为故障转移使用。redis Cluster 采用虚拟槽分区,所有的键根据哈希函数映射到 0～16383 个整数槽内,每个节点负责维护一部分槽以及槽所印映射的键值数据。</p>
<p><strong>优点:</strong></p>
<blockquote>
<ol>
<li>无中心架构。</li>
<li>数据按照 slot 存储分布在多个节点,节点间数据共享,可动态调整数据分布。</li>
<li>可扩展性: 可线性扩展到 1000 多个节点,节点可动态添加或删除。</li>
<li>高可用性: 部分节点不可用时,集群仍可用。通过增加 Slave 做 standby 数据副本,能够实现故障自动 failover,节点之间通过 gossip 协议交换状态信息,用投票机制完成 Slave 到 Master 的角色提升。</li>
<li>降低运维成本,提高系统的扩展性和可用性。</li>
</ol>
</blockquote>
<p><strong>缺点:</strong></p>
<blockquote>
<ol>
<li>Client 实现复杂,驱动要求实现 Smart Client,缓存 slots mapping 信息并及时更新,提高了开发难度,客户端的不成熟影响业务的稳定性。目前仅 JedisCluster 相对成熟,异常处理部分还不完善,比如常见的“max redirect exception”。</li>
<li>节点会因为某些原因发生阻塞(阻塞时间大于 clutser-node-timeout),被判断下线,这种 failover 是没有必要的。</li>
<li>数据通过异步复制,不保证数据的强一致性。</li>
<li>多个业务使用同一套集群时,无法根据统计区分冷热数据,资源隔离性较差,容易出现相互影响的情况。</li>
<li>Slave 在集群中充当“冷备”,不能缓解读压力,当然可以通过 SDK 的合理设计来提高 Slave 资源的利用率。</li>
<li>…</li>
</ol>
</blockquote>
<h2 id="5-持久化策略"><a href="#5-持久化策略" class="headerlink" title="5. 持久化策略"></a>5. 持久化策略</h2><p>两种: RDB 和 AOF；</p>
<p><strong>RDB</strong> 持久化可以在指定的时间间隔内生成数据集的时间点快照</p>
<p><strong>AOF</strong> 持久化记录服务器执行的所有写操作命令,并在服务器启动时,通过重新执行这些命令来还原数据集。 AOF 文件中的命令全部以 redis 协议的格式来保存,新命令会被追加到文件的末尾。 redis 还可以在后台对 AOF 文件进行重写（rewrite）,使得 AOF 文件的体积不会超出保存数据集状态所需的实际大小。</p>
<p>redis 还可以同时使用 AOF 持久化和 RDB 持久化。 在这种情况下, 当 redis 重启时, 它会优先使用 AOF 文件来还原数据集, 因为 AOF 文件保存的数据集通常比 RDB 文件所保存的数据集更完整。你甚至可以关闭持久化功能,让数据只在服务器运行时存在。</p>
<h3 id="5-1-RDB"><a href="#5-1-RDB" class="headerlink" title="5.1 RDB"></a>5.1 RDB</h3><p><strong>优点:</strong></p>
<p>RDB 是一个非常紧凑的文件,它保存了 redis 在某个时间点上的数据集。 这种文件非常适合用于进行备份:  比如说,你可以在最近的 24 小时内,每小时备份一次 RDB 文件,并且在每个月的每一天,也备份一个 RDB 文件。 这样的话,即使遇上问题,也可以随时将数据集还原到不同的版本。</p>
<p>RDB 非常适用于灾难恢复（disaster recovery）: 它只有一个文件,并且内容都非常紧凑,可以（在加密后）将它传送到别的数据中心,或者亚马逊 S3 中。		RDB 可以最大化 redis 的性能: 父进程在保存 RDB 文件时唯一要做的就是 fork 出一个子进程,然后这个子进程就会处理接下来的所有保存工作,父进程无须执行任何磁盘 I&#x2F;O 操作。RDB 在恢复大数据集时的速度比 AOF 的恢复速度要快。</p>
<p><strong>缺点:</strong></p>
<p>如果你需要尽量避免在服务器故障时丢失数据,那么 RDB 不适合你。 虽然 redis 允许你设置不同的保存点（save point）来控制保存 RDB 文件的频率, 但是, 因为RDB 文件需要保存整个数据集的状态, 所以它并不是一个轻松的操作<br>因此你可能会至少 5 分钟才保存一次 RDB 文件。 在这种情况下, 一旦发生故障停机, 你就可能会丢失好几分钟的数据。每次保存 RDB 的时候,redis 都要 fork() 出一个子进程,并由子进程来进行实际的持久化工作。 在数据集比较庞大时, fork() 可能会非常耗时,造成服务器在某某毫秒内停止处理客户端； 如果数据集非常巨大,并且 CPU 时间非常紧张的话,那么这种停止时间甚至可能会长达整整一秒<br>虽然 AOF 重写也需要进行 fork() ,但无论 AOF 重写的执行间隔有多长,数据的耐久性都不会有任何损失。</p>
<h3 id="5-2-AOF"><a href="#5-2-AOF" class="headerlink" title="5.2 AOF"></a>5.2 AOF</h3><p><strong>优点:</strong></p>
<p>对于相同的数据集来说,AOF 文件的体积通常要大于 RDB 文件的体积。根据所使用的 fsync 策略,AOF 的速度可能会慢于 RDB 。 在一般情况下, 每秒 fsync 的性能依然非常高, 而关闭 fsync 可以让 AOF 的速度和 RDB 一样快, 即使在高负荷之下也是如此。<br>不过在处理巨大的写入载入时,RDB 可以提供更有保证的最大延迟时间（latency）。</p>
<p><strong>缺点:</strong></p>
<p>AOF 在过去曾经发生过这样的 bug :  因为个别命令的原因,导致 AOF 文件在重新载入时,无法将数据集恢复成保存时的原样。 （举个例子,阻塞命令 BRPOPLPUSH 就曾经引起过这样的 bug 。） 测试套件里为这种情况添加了测试:  它们会自动生成随机的、复杂的数据集, 并通过重新载入这些数据来确保一切正常。 虽然这种 bug 在 AOF 文件中并不常见, 但是对比来说, RDB 几乎是不可能出现这种 bug 的。</p>
<h3 id="5-3-如何选？"><a href="#5-3-如何选？" class="headerlink" title="5.3 如何选？"></a>5.3 如何选？</h3><p>一般来说,如果想达到足以媲美 PostgreSQL 的数据安全性, 你应该同时使用两种持久化功能。如果你非常关心你的数据,但仍然可以承受数分钟以内的数据丢失, 那么你可以只使用 RDB 持久化。有很多用户都只使用 AOF 持久化, 但我们并不推荐这种方式:  因为定时生成 RDB 快照（snapshot）非常便于进行数据库备份, 并且 RDB 恢复数据集的速度也要比 AOF 恢复的速度要快, 除此之外, 使用 RDB 还可以避免之前提到的 AOF 程序的 bug 。</p>
<h2 id="6-三大问题及解决方案"><a href="#6-三大问题及解决方案" class="headerlink" title="6. 三大问题及解决方案"></a>6. 三大问题及解决方案</h2><h3 id="6-1-缓存穿透"><a href="#6-1-缓存穿透" class="headerlink" title="6.1 缓存穿透"></a>6.1 缓存穿透</h3><p>在大多数互联网应用中,缓存的使用流程如下</p>
<ol>
<li>当业务系统发起某一个查询请求时,首先判断缓存中是否有该数据；</li>
<li>如果缓存中存在,则直接返回数据；</li>
<li>如果缓存中不存在,则再查询数据库,然后返回数据。</li>
</ol>
<h4 id="6-1-1-简介"><a href="#6-1-1-简介" class="headerlink" title="6.1.1 简介"></a>6.1.1 简介</h4><p>业务系统要查询的数据根本就不存在！当业务系统发起查询时,按照上述流程,首先会前往缓存中查询,由于缓存中不存在,然后再前往数据库中查询。由于该数据压根就不存在,因此数据库也返回空。这就是缓存穿透。</p>
<h4 id="6-1-2-危害"><a href="#6-1-2-危害" class="headerlink" title="6.1.2 危害"></a>6.1.2 危害</h4><p>如果存在海量请求查询压根就不存在的数据,那么这些海量请求都会落到数据库中,数据库压力剧增,可能会导致系统崩溃（你要知道,目前业务系统中最脆弱的就是IO,稍微来点压力它就会崩溃,所以我们要想种种办法保护它）。</p>
<h4 id="6-1-3-原因"><a href="#6-1-3-原因" class="headerlink" title="6.1.3 原因"></a>6.1.3 原因</h4><p>发生缓存穿透的原因有很多,一般为如下两种: </p>
<p>1.恶意攻击,故意营造大量不存在的数据请求我们的服务,由于缓存中并不存在这些数据,因此海量请求均落在数据库中,从而可能会导致数据库崩溃。</p>
<p>2.代码逻辑错误。</p>
<h4 id="6-1-4-解决方案"><a href="#6-1-4-解决方案" class="headerlink" title="6.1.4 解决方案"></a>6.1.4 解决方案</h4><h5 id="6-1-4-1-缓存空数据"><a href="#6-1-4-1-缓存空数据" class="headerlink" title="6.1.4.1 缓存空数据"></a>6.1.4.1 缓存空数据</h5><p>之所以发生缓存穿透,是因为缓存中没有存储这些空数据的key,导致这些请求全都打到数据库上。</p>
<p>那么,我们可以稍微修改一下业务系统的代码,将数据库查询结果为空的key也存储在缓存中。当后续又出现该key的查询请求时,缓存直接返回null,而无需查询数据库。</p>
<p>**缓存空对象会有两个问题: **<br>        第一,空值做了缓存,意味着缓存层中存了更多的键,需要更多的内存空间 ( 如果是攻击,问题更严重 ),比较有效的方法是针对这类数据设置一个较短的过期时间,让其自动剔除。<br>        第二,缓存层和存储层的数据会有一段时间窗口的不一致,可能会对业务有一定影响。例如过期时间设置为 5 分钟,如果此时存储层添加了这个数据,那此段时间就会出现缓存层和存储层数据的不一致,此时可以利用消息系统或者其他方式清除掉缓存层中的空对象。</p>
<h5 id="6-1-4-2-BloomFilter"><a href="#6-1-4-2-BloomFilter" class="headerlink" title="6.1.4.2 BloomFilter"></a>6.1.4.2 BloomFilter</h5><p>它需要在缓存之前再加一道屏障,里面存储目前数据库中存在的所有key,如下: </p>
<p>当业务系统有查询请求的时候,首先去BloomFilter中查询该key是否存在。若不存在,则说明数据库中也不存在该数据,因此缓存都不要查了,直接返回null。若存在,则继续执行后续的流程,先前往缓存中查询,缓存中没有的话再前往数据库中的查询。</p>
<p>这种方法适用于数据命中不高,数据相对固定实时性低（通常是数据集较大）的应用场景,代码维护较为复杂,但是缓存空间占用少。</p>
<h5 id="6-1-4-3-两种方案的比较"><a href="#6-1-4-3-两种方案的比较" class="headerlink" title="6.1.4.3 两种方案的比较"></a>6.1.4.3 两种方案的比较</h5><p>这两种方案都能解决缓存穿透的问题,但使用场景却各不相同。</p>
<p>对于一些恶意攻击,查询的key往往各不相同,而且数据贼多。此时,第一种方案就显得提襟见肘了。因为它需要存储所有空数据的key,而这些恶意攻击的key往往各不相同,而且同一个key往往只请求一次。因此即使缓存了这些空数据的key,由于不再使用第二次,因此也起不了保护数据库的作用。</p>
<p>因此,对于<strong>空数据的key各不相同</strong>、<strong>key重复请求概率低</strong>的场景而言,应该选择第二种方案。而对于<strong>空数据的key数量有限</strong>、<strong>key重复请求概率较高</strong>的场景而言,应该选择第一种方案。</p>
<h3 id="6-2-缓存雪崩"><a href="#6-2-缓存雪崩" class="headerlink" title="6.2 缓存雪崩"></a>6.2 缓存雪崩</h3><h4 id="6-2-1-简介"><a href="#6-2-1-简介" class="headerlink" title="6.2.1 简介"></a>6.2.1 简介</h4><p>通过上文可知,缓存其实扮演了一个保护数据库的角色。它帮数据库抵挡大量的查询请求,从而避免脆弱的数据库受到伤害。<br>如果缓存因某种原因发生了宕机,那么原本被缓存抵挡的海量查询请求就会像疯狗一样涌向数据库。此时数据库如果抵挡不了这巨大的压力,它就会崩溃。<br>这就是缓存雪崩。</p>
<h4 id="6-2-2-如何避免缓存雪崩？"><a href="#6-2-2-如何避免缓存雪崩？" class="headerlink" title="6.2.2 如何避免缓存雪崩？"></a>6.2.2 如何避免缓存雪崩？</h4><h5 id="6-2-2-1-使用缓存集群-保证缓存高可用"><a href="#6-2-2-1-使用缓存集群-保证缓存高可用" class="headerlink" title="6.2.2.1 使用缓存集群,保证缓存高可用"></a>6.2.2.1 使用缓存集群,保证缓存高可用</h5><p>和飞机都有多个引擎一样,如果缓存层设计成高可用的,即使个别节点、个别机器、甚至是机房宕掉,依然可以提供服务,例如前面介绍过的 redis Sentinel（哨兵） 和 redis Cluster（集群) 都实现了高可用。 </p>
<h5 id="6-2-2-2-使用Hystrix"><a href="#6-2-2-2-使用Hystrix" class="headerlink" title="6.2.2.2 使用Hystrix"></a>6.2.2.2 使用Hystrix</h5><p>Hystrix是一款开源的“防雪崩工具”,它通过 熔断、降级、限流三个手段来降低雪崩发生后的损失。</p>
<p>Hystrix就是一个Java类库,它采用命令模式,每一项服务处理请求都有各自的处理器。所有的请求都要经过各自的处理器。处理器会记录当前服务的请求失败率。一旦发现当前服务的请求失败率达到预设的值,Hystrix将会拒绝随后该服务的所有请求,直接返回一个预设的结果。这就是所谓的<strong>“熔断”</strong>。当经过一段时间后,Hystrix会放行该服务的一部分请求,再次统计它的请求失败率。如果此时请求失败率符合预设值,则完全打开限流开关；如果请求失败率仍然很高,那么继续拒绝该服务的所有请求。这就是所谓的<strong>“限流”</strong>。而Hystrix向那些被拒绝的请求直接返回一个预设结果,被称为<strong>“降级”</strong>。</p>
<h3 id="6-3-缓存击穿（热点数据集中失效）"><a href="#6-3-缓存击穿（热点数据集中失效）" class="headerlink" title="6.3 缓存击穿（热点数据集中失效）"></a>6.3 缓存击穿（热点数据集中失效）</h3><h4 id="6-3-1-什么是热点数据集中失效？"><a href="#6-3-1-什么是热点数据集中失效？" class="headerlink" title="6.3.1 什么是热点数据集中失效？"></a>6.3.1 什么是热点数据集中失效？</h4><p>我们一般都会给缓存设定一个失效时间,过了失效时间后,该数据库会被缓存直接删除,从而一定程度上保证数据的实时性。</p>
<p>但是,对于一些请求量极高的热点数据而言,一旦过了有效时间,此刻将会有大量请求落在数据库上,从而可能会导致数据库崩溃。</p>
<p>如果某一个热点数据失效,那么当再次有该数据的查询请求时就会前往数据库查询。但是,从请求发往数据库,到该数据更新到缓存中的这段时间中,由于缓存中仍然没有该数据,因此这段时间内到达的查询请求都会落到数据库上,这将会对数据库造成巨大的压力。此外,当这些请求查询完成后,都会重复更新缓存。</p>
<h4 id="6-3-2-解决方案"><a href="#6-3-2-解决方案" class="headerlink" title="6.3.2 解决方案"></a>6.3.2 解决方案</h4><h5 id="6-3-2-1-互斥锁"><a href="#6-3-2-1-互斥锁" class="headerlink" title="6.3.2.1 互斥锁"></a>6.3.2.1 互斥锁</h5><p>此方法只允许一个线程重建缓存,其他线程等待重建缓存的线程执行完,重新从缓存获取数据即可。</p>
<p>当第一个数据库查询请求发起后,就将缓存中该数据上锁；此时到达缓存的其他查询请求将无法查询该字段,从而被阻塞等待；当第一个请求完成数据库查询,并将数据更新值缓存后,释放锁；此时其他被阻塞的查询请求将可以直接从缓存中查到该数据。</p>
<p>当某一个热点数据失效后,只有第一个数据库查询请求发往数据库,其余所有的查询请求均被阻塞,从而保护了数据库。但是,由于采用了互斥锁,其他请求将会阻塞等待,此时系统的吞吐量将会下降。这需要结合实际的业务考虑是否允许这么做。</p>
<p>互斥锁可以避免<strong>某一个</strong>热点数据失效导致数据库崩溃的问题,而在实际业务中,往往会存在一批热点数据同时失效的场景。那么,对于这种场景该如何防止数据库过载呢？</p>
<p><strong>设置不同的失效时间</strong></p>
<p>当我们向缓存中存储这些数据的时候,可以将他们的缓存失效时间错开。这样能够避免同时失效。如: 在一个基础时间上加&#x2F;减一个随机数,从而将这些缓存的失效时间错开。</p>
<h5 id="6-3-2-2-永远不过期"><a href="#6-3-2-2-永远不过期" class="headerlink" title="6.3.2.2 永远不过期"></a>6.3.2.2 永远不过期</h5><p>“永远不过期”包含两层意思:<br>        从缓存层面来看,确实没有设置过期时间,所以不会出现热点 key 过期后产生的问题,也就是“物理”不过期。<br>从功能层面来看,为每个 value 设置一个逻辑过期时间,当发现超过逻辑过期时间后,会使用单独的线程去构建缓存。 </p>
<p>从实战看,此方法有效杜绝了热点 key 产生的问题,但唯一不足的就是重构缓存期间,会出现数据不一致的情况,这取决于应用方是否容忍这种不一致。</p>
<h4 id="6-3-3-两种方案比较"><a href="#6-3-3-两种方案比较" class="headerlink" title="6.3.3 两种方案比较"></a>6.3.3 两种方案比较</h4><ul>
<li>互斥锁 (mutex key): 这种方案思路比较简单,但是存在一定的隐患,如果构建缓存过程出现问题或者时间较长,可能会存在死锁和线程池阻塞的风险,但是这种方法能够较好的降低后端存储负载并在一致性上做的比较好。</li>
<li>” 永远不过期 “: 这种方案由于没有设置真正的过期时间,实际上已经不存在热点 key 产生的一系列危害,但是会存在数据不一致的情况,同时代码复杂度会增大。</li>
</ul>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2020/08/06/%E6%95%B0%E6%8D%AE%E5%BA%93/redis/redis%E5%AD%A6%E4%B9%A0/">redis学习</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">王霄</a></p>
        <p><span>发布时间:</span>2020-08-06, 00:00:00</p>
        <p><span>最后更新:</span>2022-01-09, 22:48:39</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2020/08/06/%E6%95%B0%E6%8D%AE%E5%BA%93/redis/redis%E5%AD%A6%E4%B9%A0/" title="redis学习">http://example.com/2020/08/06/%E6%95%B0%E6%8D%AE%E5%BA%93/redis/redis%E5%AD%A6%E4%B9%A0/</a>
            <span class="copy-path" data-clipboard-text="原文: http://example.com/2020/08/06/%E6%95%B0%E6%8D%AE%E5%BA%93/redis/redis%E5%AD%A6%E4%B9%A0/　　作者: 王霄" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2020/08/06/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/mysql%E5%AD%A6%E4%B9%A0/">
                    mysql学习
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2020/08/06/%E6%95%B0%E6%8D%AE%E5%BA%93/redis/redis%E5%AE%89%E8%A3%85/">
                    redis安装
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">1. 简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%89%B9%E6%80%A7"><span class="toc-number">2.</span> <span class="toc-text">2. 特性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">3.</span> <span class="toc-text">3. 使用场景</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E9%AB%98%E6%80%A7%E8%83%BD%E9%80%82%E5%90%88%E5%BD%93%E5%81%9A%E7%BC%93%E5%AD%98"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 高性能适合当做缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E4%B8%B0%E5%AF%8C%E7%9A%84%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E6%80%A7%E8%83%BD%E6%9B%B4%E9%AB%98-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%E4%B8%B0%E5%AF%8C"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 丰富的数据格式性能更高,应用场景丰富</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%8D%95%E7%BA%BF%E7%A8%8B%E5%8F%AF%E4%BB%A5%E4%BD%9C%E4%B8%BA%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 单线程可以作为分布式锁</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E8%87%AA%E5%8A%A8%E8%BF%87%E6%9C%9F%E8%83%BD%E6%9C%89%E6%95%88%E6%8F%90%E5%8D%87%E5%BC%80%E5%8F%91%E6%95%88%E7%8E%87"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 自动过期能有效提升开发效率</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E5%88%86%E5%B8%83%E5%BC%8F%E5%92%8C%E6%8C%81%E4%B9%85%E5%8C%96%E6%9C%89%E6%95%88%E5%BA%94%E5%AF%B9%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%92%8C%E9%AB%98%E5%B9%B6%E5%8F%91"><span class="toc-number">3.5.</span> <span class="toc-text">3.5 分布式和持久化有效应对海量数据和高并发</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-redis%E9%AB%98%E5%8F%AF%E7%94%A8%E6%96%B9%E6%A1%88"><span class="toc-number">4.</span> <span class="toc-text">4. redis高可用方案</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 主从复制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%93%A8%E5%85%B5"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 哨兵</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E9%9B%86%E7%BE%A4"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 集群</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%8C%81%E4%B9%85%E5%8C%96%E7%AD%96%E7%95%A5"><span class="toc-number">5.</span> <span class="toc-text">5. 持久化策略</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-RDB"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 RDB</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-AOF"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 AOF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E5%A6%82%E4%BD%95%E9%80%89%EF%BC%9F"><span class="toc-number">5.3.</span> <span class="toc-text">5.3 如何选？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E4%B8%89%E5%A4%A7%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">6.</span> <span class="toc-text">6. 三大问题及解决方案</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F"><span class="toc-number">6.1.</span> <span class="toc-text">6.1 缓存穿透</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-1-%E7%AE%80%E4%BB%8B"><span class="toc-number">6.1.1.</span> <span class="toc-text">6.1.1 简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-2-%E5%8D%B1%E5%AE%B3"><span class="toc-number">6.1.2.</span> <span class="toc-text">6.1.2 危害</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-3-%E5%8E%9F%E5%9B%A0"><span class="toc-number">6.1.3.</span> <span class="toc-text">6.1.3 原因</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-4-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">6.1.4.</span> <span class="toc-text">6.1.4 解决方案</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-1-4-1-%E7%BC%93%E5%AD%98%E7%A9%BA%E6%95%B0%E6%8D%AE"><span class="toc-number">6.1.4.1.</span> <span class="toc-text">6.1.4.1 缓存空数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-1-4-2-BloomFilter"><span class="toc-number">6.1.4.2.</span> <span class="toc-text">6.1.4.2 BloomFilter</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-1-4-3-%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%A1%88%E7%9A%84%E6%AF%94%E8%BE%83"><span class="toc-number">6.1.4.3.</span> <span class="toc-text">6.1.4.3 两种方案的比较</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9"><span class="toc-number">6.2.</span> <span class="toc-text">6.2 缓存雪崩</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-1-%E7%AE%80%E4%BB%8B"><span class="toc-number">6.2.1.</span> <span class="toc-text">6.2.1 简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-2-%E5%A6%82%E4%BD%95%E9%81%BF%E5%85%8D%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9%EF%BC%9F"><span class="toc-number">6.2.2.</span> <span class="toc-text">6.2.2 如何避免缓存雪崩？</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-2-1-%E4%BD%BF%E7%94%A8%E7%BC%93%E5%AD%98%E9%9B%86%E7%BE%A4-%E4%BF%9D%E8%AF%81%E7%BC%93%E5%AD%98%E9%AB%98%E5%8F%AF%E7%94%A8"><span class="toc-number">6.2.2.1.</span> <span class="toc-text">6.2.2.1 使用缓存集群,保证缓存高可用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-2-2-%E4%BD%BF%E7%94%A8Hystrix"><span class="toc-number">6.2.2.2.</span> <span class="toc-text">6.2.2.2 使用Hystrix</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF%EF%BC%88%E7%83%AD%E7%82%B9%E6%95%B0%E6%8D%AE%E9%9B%86%E4%B8%AD%E5%A4%B1%E6%95%88%EF%BC%89"><span class="toc-number">6.3.</span> <span class="toc-text">6.3 缓存击穿（热点数据集中失效）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-1-%E4%BB%80%E4%B9%88%E6%98%AF%E7%83%AD%E7%82%B9%E6%95%B0%E6%8D%AE%E9%9B%86%E4%B8%AD%E5%A4%B1%E6%95%88%EF%BC%9F"><span class="toc-number">6.3.1.</span> <span class="toc-text">6.3.1 什么是热点数据集中失效？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-2-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">6.3.2.</span> <span class="toc-text">6.3.2 解决方案</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-3-2-1-%E4%BA%92%E6%96%A5%E9%94%81"><span class="toc-number">6.3.2.1.</span> <span class="toc-text">6.3.2.1 互斥锁</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-3-2-2-%E6%B0%B8%E8%BF%9C%E4%B8%8D%E8%BF%87%E6%9C%9F"><span class="toc-number">6.3.2.2.</span> <span class="toc-text">6.3.2.2 永远不过期</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-3-%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%A1%88%E6%AF%94%E8%BE%83"><span class="toc-number">6.3.3.</span> <span class="toc-text">6.3.3 两种方案比较</span></a></li></ol></li></ol></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>





    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2020/08/06/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/mysql%E5%AD%A6%E4%B9%A0/" title="上一篇: mysql学习">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2020/08/06/%E6%95%B0%E6%8D%AE%E5%BA%93/redis/redis%E5%AE%89%E8%A3%85/" title="下一篇: redis安装">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2023/04/13/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/mysql%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">mysql数据结构</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/02/17/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/Mqtt%E9%9D%A2%E8%AF%95%E9%A2%98/">Mqtt面试题</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/02/17/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/Spring%E4%BA%8B%E5%8A%A1%E7%9A%84%E4%BC%A0%E6%92%AD%E6%9C%BA%E5%88%B6/">Spring事务的传播机制</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/02/17/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E6%9C%BA%E5%88%B6/">事务的隔离机制</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/02/17/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/%E7%B4%A2%E5%BC%95/">索引</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/02/17/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/%E9%99%90%E6%B5%81-%E7%86%94%E6%96%AD-%E6%9C%8D%E5%8A%A1%E9%99%8D%E7%BA%A7/">限流-熔断-服务降级</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/06/15/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/%E6%8E%A5%E5%8F%A3%E5%B9%82%E7%AD%89%E6%80%A7/">接口幂等性</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/01/22/%E5%BE%AE%E6%9C%8D%E5%8A%A1/sentinel/">sentinel</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/01/09/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/git/gitlab%E5%AE%89%E8%A3%85/">gitlab安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/01/08/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/rabbitmq/rabbitmq%E5%AE%89%E8%A3%85/">rabbitmq安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/01/08/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/rabbitmq/rabbitmq%E5%AD%A6%E4%B9%A0/">rabbitmq学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/01/06/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/zookeeper%E5%AE%89%E8%A3%85/">zookeeper安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/01/05/%E5%BE%AE%E6%9C%8D%E5%8A%A1/nacos/">nacos安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/01/05/%E5%BE%AE%E6%9C%8D%E5%8A%A1/springcloud/">springcloud学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/01/01/java/java%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/">java引用类型</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/01/01/java/jdk%E5%AE%89%E8%A3%85/">jdk安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/01/01/%E5%85%B6%E4%BB%96/jmeter%E5%AD%A6%E4%B9%A0/">jmeter学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/01/01/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/">java并发编程</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/01/01/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/git/git%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/">git命令大全</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/01/01/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/git/git%E5%AE%89%E8%A3%85/">git安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/08/15/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/%E7%BA%BF%E4%B8%8Aoom%E9%97%AE%E9%A2%98/">线上oom问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/08/11/linux/linux%E5%AD%A6%E4%B9%A0/">Linux学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/08/11/linux/linux%E6%94%B6%E8%97%8F%E6%8C%87%E4%BB%A4/">Linux收藏指令</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/08/08/java/java8/lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/">lambda表达式</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/08/07/%E9%A1%B9%E7%9B%AE%E5%BA%94%E7%94%A8/%E5%BB%B6%E6%97%B6%E8%AE%A2%E5%8D%95%E5%A4%84%E7%90%86/">延时订单处理</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/08/07/java/springboot/springboot%E6%95%B4%E5%90%88mongodb/">springboot整合mongodb</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/08/06/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/%E5%AE%9A%E6%97%B6%E5%99%A8%E4%B8%8D%E6%89%A7%E8%A1%8C%E9%97%AE%E9%A2%98/">定时器不执行问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/08/06/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/">索引失效问题排查</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/08/06/java/springboot/springboot%E6%95%B4%E5%90%88redis/">springboot整合redis</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/10/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%AF%B9%E6%AF%94%E5%92%8C%E9%80%89%E5%9E%8B/">消息中间件对比和选型</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/10/java/springboot/springboot%E6%95%B4%E5%90%88activemq/">springboot整合activemq</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/10/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/activemq/activemq%E5%AD%A6%E4%B9%A0/">activemq学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/10/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/activemq/activemq%E5%AE%89%E8%A3%85/">activemq安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/09/java/springboot/springboot%E6%95%B4%E5%90%88kafka/">springboot整合kafka</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/09/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/kafka%E5%AD%A6%E4%B9%A0/">kafka学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/09/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/kafka%E5%AE%89%E8%A3%85/">kafka安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/08/java/springboot/springboot%E6%95%B4%E5%90%88rabbitmq/">springboot整合rabbitmq</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/07/java/springboot/springboot%E6%95%B4%E5%90%88rocketmq/">springboot整合rocketmq</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/07/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/rocketmq/rocketmq%E5%AD%A6%E4%B9%A0/">rocketmq学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/07/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/rocketmq/rocketmq%E5%AE%89%E8%A3%85/">rocketmq安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/01/25/%E9%A1%B9%E7%9B%AE%E5%BA%94%E7%94%A8/%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/">接口限流</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/01/25/java/springboot/springboot%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F/">springboot项目部署的两种方式</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/06/%E6%95%B0%E6%8D%AE%E5%BA%93/mongodb/mongodb%E5%AE%89%E8%A3%85/">mongodb安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/06/%E6%95%B0%E6%8D%AE%E5%BA%93/mongodb/mongodb%E5%AD%A6%E4%B9%A0/">mongodb学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/06/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/mysql%E5%AD%A6%E4%B9%A0/">mysql学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/06/%E6%95%B0%E6%8D%AE%E5%BA%93/redis/redis%E5%AD%A6%E4%B9%A0/">redis学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/06/%E6%95%B0%E6%8D%AE%E5%BA%93/redis/redis%E5%AE%89%E8%A3%85/">redis安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/05/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/">冒泡排序</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/05/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F/">选择排序</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/01/%E7%AE%97%E6%B3%95/%E5%8D%81%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2%E4%B8%BA%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%AE%97%E6%B3%95/">十进制数字转换为二进制</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/19/%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4/docker/docker%E5%85%A5%E9%97%A8/">Docker简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/23/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/">设计模式之适配器模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/22/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/">设计模式之建造者模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/">设计模式之原型模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/20/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/">设计模式之工厂方法模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/19/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/">设计模式之简单工厂模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/18/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/">设计模式之单例模式</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2018-2024 王霄
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
    
<script src="/js/GithubRepoWidget.js"></script>


<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>





    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        $("a[target=_blank]").removeAttr("target");
    
</script>

    <script>
        var originTitle = document.title;
        var titleTime;
        document.addEventListener("visibilitychange", function() {
            if (document.hidden) {
                document.title = "开心" + originTitle;
                clearTimeout(titleTime);
            }
            else {
                document.title = "不开心" + originTitle;
                titleTime = setTimeout(function() {
                    document.title = originTitle;
                }, 2000);
            }
        })
    </script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>